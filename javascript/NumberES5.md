# Number从ES5到ES6 之（ES5）
### Number简介
>javaScript不区分整数值和浮点数值。javaScript中所有的数字均用浮点数值表示。javaScript应用的是IEEE754标准定义64位浮点格式表示的数字。它表示的最大值是+/-1.7976931348623157*10<sup>308</sup>,最小值是+/-5 *10<sup>-324</sup>。javaScript能够表示的正数范围是-2<sup>53</sup>~2<sup>53</sup>,不含包含界限。如果使用了超出此范围的整数，则无法保证低位数字的精度。还需要注意的是javaScript中实际的操作（比如数组索引）则是基于32位整数。在javaScript中直接出现的数值称之为数字直接量（numneric lieral）。

**Number.MAX_SAFE_INTEGER === Math.pow(2, 53)检测包含2<sup>53</sup>不**

### 整型直接量
javaScript中识别十进制整数以及八进制（严格模式中是禁止使用八进制的）和十六进制


### 浮点型直接量
浮点型直接量可以包含有小数点。下面是浮点型的书写方案：
```
3.14
033.56
.777
6.7e33
6.7E33
6.7e-33
6.7e3.3 //会报错 Uncaught SyntaxError: Unexpected number

```
书写语法表示为：
[digits][.digits][(E|e)[+|-]digits]


### 算数运算

算数运算的运算符有：加法运算符（+）、减法运算符（-）、乘法运算符（*）、除法运算符（/）、求余运算符（%）。以及Math的属性和方法。

1. Math对象的属性：

|属性|描述|
|:-----|:-----|
|E|返回算术常量 e，即自然对数的底数（约等于2.718）。|
|LN2|返回 2 的自然对数（约等于0.693）。|
|LN10|返回 10 的自然对数（约等于2.302）。|
|LOG2E|返回以 2 为底的 e 的对数（约等于 1.414）。|
|PI|返回圆周率（约等于3.14159）。|
|LOG10E|返回以 10 为底的 e 的对数（约等于0.434）。|
|SQRT1_2|返回返回 2 的平方根的倒数（约等于 0.707）。|
|SQRT2|返回 2 的平方根（约等于 1.414）。|

2. Math 对象方法

|属性|描述|
|:-----|:-----|
|abs(x)|返回数的绝对值。|
|acos(x)|返回数的反余弦值。|
|asin(x)|返回数的反正弦值。|
|atan(x)|以介于 -PI/2 与 PI/2 弧度之间的数值来返回 x 的反正切值。|
|atan2(y,x)|返回从 x 轴到点 (x,y) 的角度（介于 -PI/2 与 PI/2 弧度之间）。|
|ceil(x)|对数进行上舍入。|
|cos(x)|返回数的余弦|
|exp(x)|返回 e 的指数|
|floor(x)|对数进行下舍入|
|log(x)|返回数的自然对数（底为e）|
|max(x,y)|返回 x 和 y 中的最高值|
|min(x,y)|返回 x 和 y 中的最低值|
|pow(x,y)|返回 x 的 y 次幂|
|random()|返回 0 ~ 1 之间的随机数|
|round(x)|把数四舍五入为最接近的整数|
|sin(x)|返回数的正弦。|
|sqrt(x)|返回数的平方根|
|tan(x)|返回角的正切|
|toSource()|返回该对象的源代码|
|valueOf()|	返回 Math 对象的原始值|

### Infinity与NAN
在JavaScript的算术运算在溢出(overflow)、下益(underflow)或被零整除时不会报错。
**溢出**
当数字超出数字的上限结果用Infinity表示超出下线用-Infinity表示。关于无穷大的行为特性为：基于它们的加、减、乘、除运算的结果还是无穷大。
**下益**
当运算结果无限接近零并比JavaScript能表示的最小值还小的时候发生的一种情形。这种情况下JavaScript将会返回0，当负数发生下益时，JavaScript会返回一个特殊的值“负零”。
另外被零整除在JavaScript中是不报错的，而是返回无穷大(Infinity)或者负无穷大(-Infinity)。
零除以零是NaN。
```
9/0  //Infinity
0/0  //NaN
1/Infinity  //0
-1/Infinity  //-0
```
在es3中Infinity和NaN是可读可写，在es5中修正了这个问题变为只读。
Number对象定义的值也是只读

**NaN**
NaN和任何值都不相等包括自身。

<!-- **0.3 - 0.2 !=0.2 - 0.1** -->

### 数值转换

**Number()**
>转化规则：
1）如果是Boolean值，true和false将分别转换为1和0。
2）如果是数字值，只是简单的传入和返回。
3）如果是null值，返回0。
4）如果是undefined,返回NaN。
5）如果是字符串，遵循下列规则：
如果是字符串中只包含数字（包括前面带正号或负号的情况），则将其转换为十进制数值，即“1”变成1，“123”会变成123，而“011”会变成11（前导的零被忽略了）；
如果字符串中包含有效的浮点格式，如“1.1”，则将其转换为对应的浮点数值（同样也会忽略前导零）；
如果字符串中包含有效的十六进制格式，例如"0xf"，则将其他转换为相同大小的十进制整数值；
如果字符串是空的（不包含任何字符），则将其转换为0；
如果字符串中包含除上述格式之外的字符，则将其他转换成NaN.
6)如果是对象，则调用对象的valueOf()方法，然后依照前面的规则转换返回的值。如果转换的结果是NaN，则调用的对象的toString()方法，然后再次依照前面的规则转换返回的字符串值。

Number 对象属性：


|属性|描述|
|:-----|:-----|
|constructor|返回对创建此对象的 Number 函数的引用|
|MAX_VALUE|可表示的最大的数|
|MIN_VALUE|可表示的最小的数|
|NaN|非数字值|
|NEGATIVE_INFINITY|负无穷大，溢出时返回该值|
|POSITIVE_INFINITY|正无穷大，溢出时返回该值|
|prototype|使您有能力向对象添加属性和方法|


Number 对象方法：

|属性|描述|
|:-----|:-----|
|toString|把数字转换为字符串，使用指定的基数|
|toLocaleString|把数字转换为字符串，使用本地数字格式顺序|
|toFixed|把数字转换为字符串，结果的小数点后有指定位数的数字|
|toExponential|把对象的值转换为指数计数法|
|toPrecision|把数字格式化为指定的长度|
|valueOf|返回一个 Number 对象的基本数字值|

**parseInt()**

parseInt(string,radix) //第一个参数是字符串 第二个参数是类型（进制类型）


|参数|描述|
|:-----|:-----|
|string|必需。要被解析的字符串|
|radix|可选。表示要解析的数字的基数。该值介于 2 ~ 36 之间 或者为 0。如果省略该参数或其值为 0，则数字将以 10 为基础来解析。如果它以 “0x” 或 “0X” 开头，将以 16 为基数。如果该参数小于2 且不为0 ，或者大于 36，则 parseInt() 将返回 NaN。|



转换规则：
在转换字符串时，更多的时看其是否符合数值模式。会忽略字符串前面的空格，直至找到第一个非空格字符
1、如果第一个字符不是数字字符或都负号，parseInt()就会返回NaN; 也就是说，用parseInt()转换空字符串会返回NaN。
2、如果第一个字符是数字字符，parseInt()会继续解析第二个字符，直到解析完所有后续字符或者遇到了一个非数字字符。例如，"1234blue"会被转换为1234，因为"blue"会被完全忽略。类似地"22.5"会被转换为22，因为小数点不是有效的数字字符。
3、如果字符串以"0x"开头且后跟数字字符，就会将其当作一个十六进制整数；
4、如果字符串以"0"开头且后跟数字字符，就会将其当作一个八进制整数；
5、parseInt()函数增加了第二参数用于指定转换时使用的基数（即多少进制）如：parseInt("10",16)//按十六进制解析；parseInt("10",8)//按八进制解析

```
var num1 = parseInt("1234blue"); //1234
var num2 = parseInt(""); //NaN
var num3 = parseInt("0xA") //10(十六进制)
var num4 = parseInt("22.5"); //22
var num5 = parseInt("070"); //56(八进制)
var num6 = parseInt("70"); //(70)十进制
var num7 = parseInt("0xF") //15(十六进制)
```
**js中使用parseint需要注意的地方**



1、在没有指定radix或者radix为0的情况下，parseInt会按十进制进行转换。然而，如果string的值以“0x”开头，parseInt会按十六进制进行转换；
2、parseInt 会先调用 toString 方法，看如下几个parseInt的返回值
```
alert(0.000001);  // 弹出 0.000001
alert(0.0000001);  // 弹出1e-7
parseInt(0.000001)   // 返回0
parseInt(0.0000001)  // 返回1
(因为0.0000001被转换成字符串时变成"1e-7",所以变成parseInt("1e-7"))
parseInt('0.000001')   // 返回0
parseInt('0.0000001')  // 返回0


parseInt(1000000000000000000000.5) // 1, 等同parseInt('1e+21')
parseInt(0.0000008)                // 8, 等同于parseInt('8e-7')



parseInt("1111111111111111111111", 10) //1.1111111111111111e+21, 22位
parseInt(1111111111111111111111, 10)   //1, 22位
parseInt(111111111111111111111, 10)    //111111111111111110000, 21位
parseInt(11111111111111111111, 10)     //11111111111111110000，20位
parseInt(1111111111111111111, 10)      //1111111111111111200, 19位
parseInt(111111111111111111, 10)       //111111111111111100, 18位
parseInt(11111111111111111, 10)        //11111111111111112, 17位
parseInt(1111111111111111, 10)         //1111111111111111, 16位
```

[parseInt之0.0000001陷阱分析小结](http://www.clicksun.com.cn/mis/bbs/showbbs.asp?id=8202)



巧用：parseInt(x.style.marginLeft, 10);这个去掉后面的px


**parseFloat()**
与parseInt()函数类似，parseFloat()也是从第一个字符（位置0）形如解析每个字符，而且也是一直解析到字符串末尾，或者解析到遇见一个无效的浮点数字字符为止。也就是说，字符串中的第一个小数点是有效的，而第二个小数点就是无效的了，因此它后面的字符串将被忽略。例如："22.34.5"将会转换为22.34。

除了第一个小数点有效之外，parseFloat()与parseInt()的第二个区别在于它始终都会忽略前导的零。parseFloat()可以识别前面讨论过的所有的浮点数值格式，也包括十进制整数格式。但十六进制格式的字符串则始终会被转换成0。由于parseFloat()只解析十进制值，因此它没有用第二个参数指定基数的用法。

另外，如果字符串包含的是一个可解析为整数的数（没有小数点，或者小数点后面都是零），parseFloat()会返回整数。

实例
```
var num1=parseFloat("1234blue");  //1234

var num2=parseFloat("0xA");                  //0

var num3=parseFloat("0908.5");      //908.5

var num4=parseFloat("3.125e7");             //31250000
```

**注意**

1）值得注意的是，浮点数值的最高精度是17位小数，但在进行算术计算时其精确度远远不如整数。例如0.1加0.2的结果不是0.3，而是0.30000000000000004；99.99加0.1的结果不是100.09而是100.08999999999999。这个小小的舍人误差会导致无法测试特定的浮点数值。

例如：

 if(a+b==0.3) //不要做这样的测试

2) 在计算时有可能会计算出NaN的结果，ECMAScript定义了isNaN()函数。这个函数接受一个参数，该参数可以是任何类型，而函数会帮我们确定这个参数是否“不是数值”。isNaN()在接收到一个值之后，会尝试将这个值转换为数值。不能转换为数值的参数会返回true。

[0.1+0.2≠0.3原因](https://www.zhihu.com/question/24415787)

[精度解决方案](http://jiangzhengjun.iteye.com/blog/458869)

### isFinite函数
isFinite() 函数用于检查其参数是否是无穷大。
如果 number 是 NaN（非数字），或者是正、负无穷大的数，则返回 false



-----
觉得好就给个脸：

: ) 
